<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	
    <link rel="icon" type="image/png" href="/my-favicon/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="/my-favicon/favicon.svg" />
    <link rel="shortcut icon" href="/my-favicon/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/my-favicon/apple-touch-icon.png" />
    <meta name="apple-mobile-web-app-title" content="ProfCR" />
    <link rel="manifest" href="/my-favicon/site.webmanifest" />

    <!-- SEO Meta Tags Optimizados -->
    <title>ProfCR - Marketing Profesional</title>
    <meta name="description" content="Conecta con los mejores profesionales y servicios de Costa Rica. Creamos tu sitio web y potenciamos tu presencia digital.">
    <meta name="keywords" content="sitios web costa rica, marketing digital profesional, cv digital, diseño web con ia, inteligencia artificial, sitios web para profesionales, costa rica, pymes, abogados, arquitectos">
	<link rel="canonical" href="https://profcr.com/" />

    <!-- Open Graph / Facebook & WhatsApp -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://profcr.com/">
    <meta property="og:title" content="ProfCR - Marketing Profesional para tu Negocio">
    <meta property="og:description" content="Directorio de profesionales en Costa Rica y servicio de creación de sitios web. Tu presencia digital, elevada.">
    <meta property="og:image" content="https://profcr.com/images/seo-preview.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:site_name" content="ProfCR">

    <!-- Twitter Card -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://profcr.com/">
    <meta property="twitter:title" content="ProfCR - Marketing Profesional para tu Negocio">
    <meta property="twitter:description" content="Directorio de profesionales en Costa Rica y servicio de creación de sitios web. Tu presencia digital, elevada.">
    <meta property="twitter:image" content="https://profcr.com/images/seo-preview.jpg">

	<!-- Favicon & Theme Color -->
    <link rel="icon" href="/favicon.ico" sizes="any">
    <link rel="icon" href="/favicon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    <meta name="theme-color" content="#ffffff">

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        html {
            scroll-behavior: smooth;
        }
        body { 
            font-family: 'Inter', sans-serif; 
            background-color: #ffffff;
            color: #1d1d1f;
        }
        .header-blur {
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            background-color: rgba(255, 255, 255, 0.7);
            border-bottom: 1px solid rgba(0, 0, 0, 0.07);
        }
        .search-input {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%236e6e73' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Ccircle cx='11' cy='11' r='8'%3E%3C/circle%3E%3Cline x1='21' y1='21' x2='16.65' y2='16.65'%3E%3C/line%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: 1.5rem center;
            background-size: 1.25rem;
        }
        .card-hover {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.08);
        }
        @keyframes fade-in-up {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in-up {
            animation: fade-in-up 0.8s ease-out forwards;
            opacity: 0;
        }
        .mobile-menu {
            transition: transform 0.3s ease-in-out;
            transform: translateX(100%);
        }
        .mobile-menu.is-open {
            transform: translateX(0);
        }
        .menu-backdrop {
            transition: opacity 0.3s ease-in-out;
        }
        code {
            background-color: rgba(0, 0, 0, 0.05);
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.9em;
        }
        .submenu {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease-in-out;
        }
        .desktop-submenu {
            transition: opacity 0.3s ease, transform 0.3s ease;
        }
        .popup-backdrop {
            transition: opacity 0.3s ease-in-out;
        }
        .popup-container {
            transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
        }
        .chat-widget {
            transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out;
        }
        .chat-bubble {
            max-width: 85%;
            word-wrap: break-word;
        }
        /* Typing indicator animation */
        .typing-indicator span {
            height: 8px;
            width: 8px;
            float: left;
            margin: 0 1px;
            background-color: #9E9EA1;
            display: block;
            border-radius: 50%;
            opacity: 0.4;
            animation: 1s blink infinite .3333s;
        }
        .typing-indicator span:nth-child(2) {
            animation-delay: .6666s;
        }
        .typing-indicator span:nth-child(3) {
            animation-delay: .9999s;
        }
        @keyframes blink {
            50% {
                opacity: 1;
            }
        }
    </style>

	<script type="application/ld+json">
	{
	  "@context": "https://schema.org",
	  "@type": "Organization",
	  "name": "ProfCR",
	  "url": "https://profcr.com/",
	  "logo": "https://profcr.com/images/logo.png",
	  "description": "Servicio de creación de sitios web y CVs digitales para profesionales en Costa Rica, potenciado por Inteligencia Artificial.",
	  "contactPoint": {
	    "@type": "ContactPoint",
	    "email": "planes@profcr.com",
	    "contactType": "Customer Service"
	  },
	  "address": {
	    "@type": "PostalAddress",
	    "addressCountry": "CR",
	    "addressLocality": "San José"
	  },
	  "sameAs": [
	    "https://www.facebook.com/profcr/",
	    "https://x.com/profcr",
	    "https://www.instagram.com/profcr/"
	  ],
	  "potentialAction": {
	    "@type": "SearchAction",
	    "target": "https://profcr.com/#directorio?q={search_term_string}",
	    "query-input": "required name=search_term_string"
	  },
	  "hasOfferCatalog": {
	    "@type": "OfferCatalog",
	    "name": "Planes de Sitios Web",
	    "itemListElement": [
	      {
	        "@type": "Offer",
	        "name": "Plan Esencial",
	        "description": "Tu CV digital. Un sitio web de una página con diseño profesional y adaptable.",
	        "url": "https://profcr.com/#planes",
	        "priceSpecification": {
	          "@type": "PriceSpecification",
	          "price": "29",
	          "priceCurrency": "USD",
	          "valueAddedTaxIncluded": "false",
	          "unitText": "mes"
	        }
	      },
	      {
	        "@type": "Offer",
	        "name": "Plan Crecimiento",
	        "description": "La solución completa para crecer. Sitio web de hasta 5 páginas con galería y formulario.",
	        "url": "https://profcr.com/#planes",
	        "priceSpecification": {
	          "@type": "PriceSpecification",
	          "price": "49",
	          "priceCurrency": "USD",
	          "valueAddedTaxIncluded": "false",
	          "unitText": "mes"
	        }
	      },
	      {
	        "@type": "Offer",
	        "name": "Plan Impacto",
	        "description": "Conviértete en un referente. Todo lo del Plan Crecimiento más una sección de Blog y SEO inicial.",
	        "url": "https://profcr.com/#planes",
	        "priceSpecification": {
	          "@type": "PriceSpecification",
	          "price": "79",
	          "priceCurrency": "USD",
	          "valueAddedTaxIncluded": "false",
	          "unitText": "mes"
	        }
	      }
	    ]
	  }
	}
	</script>
</head>
<body class="antialiased">

    <!-- Header -->
    <header class="header-blur sticky top-0 z-30">
        <nav class="container mx-auto px-6 py-3 flex justify-between items-center">
            <a href="#">
                <img src="images/logo.png" alt="ProfCR Logo" class="h-12 w-auto">
            </a>
            <div class="hidden md:flex items-center space-x-8 text-sm font-medium text-gray-700">
                <a href="#directorio" class="hover:text-blue-600 transition-colors">Directorio</a>
                <a href="#beneficios" class="hover:text-blue-600 transition-colors">Beneficios</a>
                <div class="relative" id="desktop-plans-menu-container">
                    <button id="desktop-plans-btn" class="flex items-center hover:text-blue-600 transition-colors">
                        <span>Planes</span>
                        <svg id="desktop-plans-chevron" class="w-4 h-4 ml-1 transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </button>
                    <div id="desktop-plans-submenu" class="desktop-submenu absolute mt-2 w-48 bg-white rounded-lg shadow-xl z-20 hidden opacity-0 transform -translate-y-2">
                        <a href="https://esencial.profcr.com/" target="_blank" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-blue-600">Esencial</a>
                        <a href="https://crecimiento.profcr.com/" target="_blank" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-blue-600">Crecimiento</a>
                        <a href="https://impacto.profcr.com/" target="_blank" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-blue-600">Impacto</a>
                    </div>
                </div>
                 <a href="#planes" class="bg-blue-600 text-white text-sm font-semibold py-2 px-4 rounded-full hover:bg-blue-700 transition-colors">Obtener Sitio Web</a>
            </div>
            <div class="md:hidden">
                <button id="menu-btn" class="text-gray-700 focus:outline-none p-2 -mr-2">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
                </button>
            </div>
        </nav>
    </header>

    <!-- Menú Móvil Desplegable -->
    <div id="menu-backdrop" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden menu-backdrop"></div>
    <div id="mobile-menu" class="fixed top-0 right-0 h-full w-72 bg-white/80 backdrop-blur-lg z-50 mobile-menu p-6 shadow-xl flex flex-col">
        <div class="flex justify-end mb-8">
            <button id="close-btn" class="text-gray-700 focus:outline-none">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
            </button>
        </div>
        <nav class="flex flex-col space-y-6 text-lg text-center flex-grow">
            <a href="#directorio" class="text-gray-800 hover:text-blue-600 transition-colors menu-link">Directorio</a>
            <a href="#beneficios" class="text-gray-800 hover:text-blue-600 transition-colors menu-link">Beneficios</a>
            <div>
                <button id="planes-toggle-btn" class="w-full flex items-center justify-center text-gray-800 hover:text-blue-600 transition-colors">
                    <span>Planes</span>
                    <svg id="planes-chevron" class="w-5 h-5 ml-1 transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                </button>
                <div id="planes-submenu" class="submenu">
                    <div class="pt-4 flex flex-col space-y-4">
                        <a href="https://esencial.profcr.com/" target="_blank" class="text-gray-600 text-base hover:text-blue-600 transition-colors menu-link">Esencial</a>
                        <a href="https://crecimiento.profcr.com/" target="_blank" class="text-gray-600 text-base hover:text-blue-600 transition-colors menu-link">Crecimiento</a>
                        <a href="https://impacto.profcr.com/" target="_blank" class="text-gray-600 text-base hover:text-blue-600 transition-colors menu-link">Impacto</a>
                    </div>
                </div>
            </div>
            <a href="#planes" class="mt-4 inline-block bg-blue-600 text-white text-sm font-semibold py-3 px-6 rounded-full hover:bg-blue-700 transition-colors menu-link">Obtener Sitio Web</a>
        </nav>
        <div class="mt-auto pt-6 border-t border-gray-200/80">
            <div class="flex justify-center space-x-6 mb-6">
                <a href="https://www.facebook.com/amarkstudios/" target="_blank" class="text-gray-500 hover:text-blue-600 transition-colors">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z" clip-rule="evenodd" /></svg>
                </a>
                <a href="https://x.com/amarkstudio" target="_blank" class="text-gray-500 hover:text-gray-900 transition-colors">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
                </a>
                <a href="https://www.instagram.com/amarkstudio/" target="_blank" class="text-gray-500 hover:text-pink-600 transition-colors">
                     <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M12 2c2.828 0 3.23.012 4.352.063c1.096.05 1.83.218 2.47.464c.652.25 1.21.583 1.745 1.12c.537.536.87 1.092 1.12 1.744c.246.64.414 1.375.464 2.47c.05 1.123.063 1.524.063 4.352s-.012 3.23-.063 4.352c-.05 1.096-.218 1.83-.464 2.47c-.25.652-.583 1.21-1.12 1.745c-.536.537-1.092.87-1.744 1.12c-.64.246-1.375.414-2.47.464C8.77 2.013 9.172 2 12 2zm0 1.8c-2.775 0-3.15.01-4.25.06c-1.012.046-1.63.208-2.09.4c-.48.198-.86.46-1.25.85c-.39.39-.652.77-.85 1.25c-.192.46-.354 1.078-.4 2.09c-.05 1.1-.06 1.475-.06 4.25s.01 3.15.06 4.25c.046 1.012.208 1.63.4 2.09c.198.48.46.86.85 1.25c.39.39.77.652 1.25.85c.46.192 1.078.354 2.09.4c1.1.05 1.475.06 4.25.06s3.15-.01 4.25-.06c1.012-.046 1.63-.208-2.09-.4c.48-.198.86-.46 1.25-.85c.39-.39.652-.77.85-1.25c.192-.46.354-1.078.4-2.09c.05-1.1.06-1.475.06-4.25s-.01-3.15-.06-4.25c-.046-1.012-.208-1.63-.4-2.09c-.198-.48-.46-.86-.85-1.25c-.39-.39-.77-.652-1.25-.85c-.46-.192-1.078-.354-2.09-.4C15.15 3.81 14.775 3.8 12 3.8zm0 4.5a3.7 3.7 0 100 7.4a3.7 3.7 0 000-7.4zm0 6c-1.215 0-2.2-1.03-2.2-2.3s.985-2.3 2.2-2.3s2.2 1.03 2.2 2.3s-.985 2.3-2.2-2.3zm4.336-6.42a.9.9 0 100-1.8a.9.9 0 000 1.8z" clip-rule="evenodd" /></svg>
                </a>
                <a href="https://www.tiktok.com/@amarkstudio" target="_blank" class="text-gray-500 hover:text-gray-900 transition-colors">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path d="M16.6 5.82s.51.5 0 0A4.278 4.278 0 0 1 15.54 3h-1.7v6.33A6.81 6.81 0 0 1 9.12 16a6.27 6.27 0 0 1-6.16-7.11 6.1 6.1 0 0 1 6.08-5.16v2.1a3.9 3.9 0 0 0-3.8 4.54 4.02 4.02 0 0 0 4.1 3.51 4.08 4.08 0 0 0 4.05-4.13V3h1.7a2.58 2.58 0 0 0 2.5 2.82z"/></svg>
                </a>
            </div>
            <a href="#">
                <img src="images/logo.png" alt="ProfCR Logo" class="h-14 w-auto mx-auto">
            </a>
        </div>
    </div>
    
    <!-- PopUp Promocional -->
    <div id="popup-container" class="fixed inset-0 z-40 flex items-center justify-center p-4 hidden">
        <div id="popup-backdrop" class="fixed inset-0 bg-black/50 backdrop-blur-sm popup-backdrop opacity-0"></div>
        <div id="popup-box" class="popup-container bg-black text-white w-full max-w-md p-8 rounded-2xl shadow-2xl text-center relative opacity-0 transform scale-95">
            <button id="popup-close-btn" class="absolute top-4 right-4 text-white/50 hover:text-white transition-colors">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
            </button>
            <img src="images/web-app-manifest-512x512.png" alt="ProfCR Logo" class="h-16 w-auto mx-auto mb-6">
            <h2 class="text-2xl font-bold mb-4">Oferta para Fundadores</h2>
            <p class="text-white/80 mb-8">Para los primeros <strong>100 profesionales</strong> en unirse a ProfCR, regalamos el diseño de un logotipo profesional para su negocio. ¡Totalmente gratis con cualquier plan!</p>
            <a href="#planes" id="popup-action-btn" class="inline-block bg-white text-black text-sm font-semibold py-3 px-6 rounded-full hover:bg-gray-200 transition-colors w-full">Ver Planes</a>
        </div>
    </div>

    <!-- Main Content -->
    <main>
        <section id="directorio" class="text-center py-24 md:py-32 px-6 bg-white">
            <h1 class="text-5xl md:text-7xl font-extrabold tracking-tight text-gray-900 mb-6">El profesional que buscas, <br>justo aquí.</h1>
            <p class="max-w-2xl mx-auto text-lg md:text-xl text-gray-600 mb-10">Conecta con los mejores profesionales y servicios de Costa Rica. Fácil, rápido y confiable.</p>
            <div class="max-w-xl mx-auto">
                <input id="search-input" type="text" placeholder="Busca por servicio, nombre o ubicación..." class="search-input w-full h-16 pl-20 pr-6 text-lg bg-gray-50 border border-gray-200 rounded-full focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition duration-300">
            </div>
        </section>

        <section class="container mx-auto px-6 pb-24 -mt-16">
            <h2 id="results-title" class="text-center text-sm font-semibold tracking-widest text-gray-500 uppercase mb-8">Últimos profesionales agregados</h2>
            <div id="results-container" class="grid sm:grid-cols-2 lg:grid-cols-3 gap-8">
            </div>
        </section>

        <section id="beneficios" class="py-24 md:py-32 px-6 bg-gray-50">
            <div class="container mx-auto space-y-24">
                <div class="grid lg:grid-cols-2 gap-12 items-center">
                    <div class="text-center lg:text-left">
                        <h3 class="text-3xl md:text-4xl font-bold tracking-tight mb-4">Productividad en pantalla grande.</h3>
                        <p class="text-lg text-gray-600">Tu CV digital cobra vida en el escritorio, presentando tu trabajo con el máximo detalle e impacto. Es tu oficina virtual, abierta para clientes potenciales 24/7.</p>
                    </div>
                    <div class="flex justify-center">
                        <img src="images/laptop.png" alt="Sitio web en laptop" class="max-w-full h-auto rounded-lg">
                    </div>
                </div>
                <div class="grid lg:grid-cols-2 gap-12 items-center">
                    <div class="lg:order-2 text-center lg:text-left">
                        <h3 class="text-3xl md:text-4xl font-bold tracking-tight mb-4">Versatilidad en tus manos.</h3>
                        <p class="text-lg text-gray-600">En una tablet, tu sitio se convierte en un portafolio interactivo. Perfecto para presentaciones uno a uno, permitiendo una navegación táctil, fluida e inmersiva.</p>
                    </div>
                    <div class="flex justify-center lg:order-1">
                        <img src="images/tablet.png" alt="Sitio web en tablet" class="max-w-sm md:max-w-md h-auto rounded-lg">
                    </div>
                </div>
                <div class="grid lg:grid-cols-2 gap-12 items-center">
                    <div class="text-center lg:text-left">
                        <h3 class="text-3xl md:text-4xl font-bold tracking-tight mb-4">Conexión instantánea.</h3>
                        <p class="text-lg text-gray-600">En el celular, cada detalle cuenta. Tu información de contacto está a un toque de distancia, convirtiendo visitantes en clientes de forma rápida y eficiente, donde sea que estén.</p>
                    </div>
                    <div class="flex justify-center">
                        <img src="images/phone.png" alt="Sitio web en celular" class="max-w-[250px] h-auto rounded-lg">
                    </div>
                </div>
            </div>
        </section>

        <section class="py-24 md:py-32 px-6 bg-white text-center">
            <div class="container mx-auto">
                <h2 class="text-4xl md:text-5xl font-bold tracking-tight mb-6">La Fusión Perfecta: <br>Creatividad Humana, Velocidad IA.</h2>
                <p class="max-w-3xl mx-auto text-lg text-gray-600 mb-12"><a href="https://wstudiocr.com" class="text-red-600 hover:underline">W Studio</a> nace de la unión entre la visión estratégica de Apolo y la ejecución de Gemini. Esta sinergia nos permite crear sitios web de calidad superior en tiempo récord. Ofrecemos un producto sostenible y de vanguardia, haciendo el diseño profesional accesible para todos.</p>
                <div class="flex justify-center items-center h-80">
                    <img src="images/humanai.png" alt="Concepto de colaboración Humano-IA" class="max-h-full">
                </div>
                <!-- ===== NUEVO BLOQUE DEL BOTÓN STORYBOOK ===== -->
                <div class="text-center mt-16">
                    <a href="https://g.co/gemini/share/fe0942aa63d7" target="_blank" class="inline-block bg-gray-800 text-white text-sm font-semibold py-3 px-8 rounded-full hover:bg-black transition-colors">
                        Ver el Storybook de nuestra Creación
                    </a>
                </div>
                <!-- ===== FIN DEL NUEVO BLOQUE ===== -->
            </div>
        </section>
        
        <!-- Storybook Section -->
        <section id="storybook" class="py-24 md:py-32 px-6 bg-gray-50">
            <div class="container mx-auto max-w-5xl">
                <div class="text-center mb-16">
                    <h2 class="text-4xl md:text-5xl font-bold tracking-tight">La Evolución Digital con ProfCR</h2>
                    <p class="mt-4 text-lg text-gray-600">Nuestra historia y por qué existimos para potenciarte.</p>
                </div>
                <div class="space-y-12 md:space-y-16">
                    <!-- Capítulo 1 -->
                    <div class="grid md:grid-cols-3 gap-8 items-start">
                        <h3 class="md:col-span-1 text-2xl font-semibold text-gray-800">1. El Dilema del Profesional Moderno</h3>
                        <div class="md:col-span-2 text-gray-600 space-y-4">
                            <p>En el vibrante mercado de Costa Rica, miles de profesionales talentosos y negocios locales son la columna vertebral de nuestra economía. Sin embargo, muchos de ellos enfrentan un dilema moderno: son expertos en su campo, pero invisibles en el mundo digital. O peor aún, están atrapados con sitios web obsoletos, caros y que no funcionan en dispositivos móviles, proyectando una imagen que no les hace justicia.</p>
                        </div>
                    </div>
                    <!-- Capítulo 2 -->
                    <div class="grid md:grid-cols-3 gap-8 items-start">
                        <h3 class="md:col-span-1 text-2xl font-semibold text-gray-800">2. Un Ecosistema, no solo una Web</h3>
                        <div class="md:col-span-2 text-gray-600 space-y-4">
                            <p>ProfCR nace para resolver este dilema. No somos solo una empresa de diseño web; somos un ecosistema digital. Nuestra plataforma central, ProfCR.com, actúa como un directorio de prestigio que atrae clientes y da visibilidad. Desde este "hub", cada profesional obtiene su propio sitio web, su "spoke", creando una red de confianza y profesionalismo que beneficia a todos.</p>
                        </div>
                    </div>
                    <!-- Capítulo 3 -->
                    <div class="grid md:grid-cols-3 gap-8 items-start">
                        <h3 class="md:col-span-1 text-2xl font-semibold text-gray-800">3. Tu Identidad Digital a Medida</h3>
                        <div class="md:col-span-2 text-gray-600 space-y-4">
                            <p>Entendemos que cada profesional tiene necesidades diferentes. Por eso, hemos creado tres planes claros y sin sorpresas: el <strong>Plan Esencial</strong>, tu CV Digital para un impacto inmediato; el <strong>Plan Crecimiento</strong>, tu Portafolio Profesional para mostrar tu trabajo; y el <strong>Plan Impacto</strong>, tu Plataforma de Autoridad para convertirte en un referente con tu propio blog. Todos los planes, sin excepción, incluyen tu dominio <code>minegocio.profcr.com</code> y correo profesional <code>minegocio@profcr.com</code> sin costo adicional.</p>
                        </div>
                    </div>
                    <!-- Capítulo 4 -->
                    <div class="grid md:grid-cols-3 gap-8 items-start">
                        <h3 class="md:col-span-1 text-2xl font-semibold text-gray-800">4. El Viaje de Cero a Online</h3>
                        <div class="md:col-span-2 text-gray-600 space-y-4">
                            <p>Nuestro proceso es la definición de simplicidad. <strong>1. Eliges tu plan. 2. Te suscribes a través de PayPal. 3. Nuestro asistente de IA te contacta para recopilar tu información.</strong> En tiempo récord, clonamos la plantilla de tu plan, la personalizamos con tu contenido y la publicamos. Sin complicaciones técnicas, sin jerga confusa. Solo resultados profesionales.</p>
                        </div>
                    </div>
                    <!-- Capítulo 5 -->
                    <div class="grid md:grid-cols-3 gap-8 items-start">
                        <h3 class="md:col-span-1 text-2xl font-semibold text-gray-800">5. La Fusión: El Secreto de W Studio</h3>
                        <div class="md:col-span-2 text-gray-600 space-y-4">
                            <p>¿Cómo logramos esta calidad a un precio tan accesible? La respuesta es nuestra sinergia. W Studio es la fusión de la visión estratégica y el control de calidad humano de Apolo con la velocidad y eficiencia de Gemini, nuestra IA de diseño. Esta colaboración nos permite automatizar los procesos complejos, reduciendo costos y tiempos de entrega, para que tú solo te preocupes por lo que mejor sabes hacer: tu trabajo.</p>
                        </div>
                    </div>
                </div>
                 <!-- Botón Adicional del Storybook -->
                <div class="text-center mt-16">
                    <a href="https://g.co/gemini/share/1dc24b717fec" target="_blank" class="inline-block bg-gray-800 text-white text-sm font-semibold py-3 px-8 rounded-full hover:bg-black transition-colors">
                        Ver el Storybook
                    </a>
                </div>
            </div>
        </section>

        <section id="planes" class="py-24 bg-white">
            <div class="container mx-auto px-6 text-center">
                <h2 class="text-4xl font-bold tracking-tight mb-4">Simple, transparente y sin sorpresas.</h2>
                <p class="max-w-2xl mx-auto text-lg text-gray-600 mb-16">Elige el plan que impulse tu crecimiento. Sin contratos, cancela cuando quieras.</p>
                <div class="grid lg:grid-cols-3 gap-8 max-w-6xl mx-auto text-left">
                    <div class="bg-gray-50 rounded-2xl p-8 flex flex-col border border-gray-200/80">
                        <h3 class="text-lg font-semibold mb-2">Esencial</h3>
                        <p class="text-gray-600 mb-6">Tu curriculum vitae digital.</p>
                        <p class="text-5xl font-bold mb-8">$29<span class="text-xl font-medium text-gray-500"> / mes</span></p>
                        <ul class="space-y-4 text-gray-700 mb-10 flex-grow text-sm">
                            <li class="flex items-start"><span class="text-blue-600 mr-3 mt-1">✓</span>Sitio web de una página.</li>
                            <li class="flex items-start"><span class="text-blue-600 mr-3 mt-1">✓</span>Diseño profesional y adaptable.</li>
                            <li class="flex items-start"><span class="text-blue-600 mr-3 mt-1">✓</span>Hosting y mantenimiento incluidos.</li>
                        </ul>
                        <div id="paypal-button-container-P-8KD45673HW2618100NCYUADY"></div>
                    </div>
                    <div class="bg-gray-800 text-white rounded-2xl p-8 flex flex-col">
                         <h3 class="text-lg font-semibold mb-2">Crecimiento <span class="text-xs bg-blue-500 text-white font-bold px-2 py-1 rounded-full ml-2">Popular</span></h3>
                        <p class="text-gray-400 mb-6">La solución completa para crecer.</p>
                        <p class="text-5xl font-bold mb-8">$49<span class="text-xl font-medium text-gray-400"> / mes</span></p>
                        <ul class="space-y-4 text-gray-300 mb-10 flex-grow text-sm">
                            <li class="flex items-start"><span class="text-blue-500 mr-3 mt-1">✓</span>Sitio web de hasta 5 páginas.</li>
                            <li class="flex items-start"><span class="text-blue-500 mr-3 mt-1">✓</span>Galería de imágenes y formulario.</li>
                            <li class="flex items-start"><span class="text-blue-500 mr-3 mt-1">✓</span>Ideal para mostrar tu trabajo.</li>
                        </ul>
                        <div id="paypal-button-container-P-1T955501L66107610NCYUMBI"></div>
                    </div>
                    <div class="bg-gray-50 rounded-2xl p-8 flex flex-col border border-gray-200/80">
                        <h3 class="text-lg font-semibold mb-2">Impacto</h3>
                        <p class="text-gray-600 mb-6">Conviértete en un referente.</p>
                        <p class="text-5xl font-bold mb-8">$79<span class="text-xl font-medium text-gray-500"> / mes</span></p>
                        <ul class="space-y-4 text-gray-700 mb-10 flex-grow text-sm">
                            <li class="flex items-start"><span class="text-blue-600 mr-3 mt-1">✓</span>Todo lo del Plan Crecimiento.</li>
                            <li class="flex items-start"><span class="text-blue-600 mr-3 mt-1">✓</span>Sección de Blog para marketing.</li>
                            <li class="flex items-start"><span class="text-blue-600 mr-3 mt-1">✓</span>Posicionamiento SEO inicial.</li>
                        </ul>
                        <div id="paypal-button-container-P-9DB8761963542112PNCYUFHY"></div>
                    </div>
                </div>
                <div class="mt-12 max-w-4xl mx-auto text-center">
                    <p class="text-sm text-gray-600">
                        <span class="font-semibold text-gray-800">¡Beneficio Adicional!</span> Todos nuestros planes incluyen un dominio personalizado (ej: <code>minegocio.profcr.com</code>) y un correo profesional (ej: <code>minegocio@profcr.com</code>) sin costo adicional para una imagen de marca impecable.
                    </p>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer id="contacto" class="bg-white">
        <div class="container mx-auto px-6 py-16 text-center text-gray-600 border-t border-gray-200">
            <a href="#">
                <img src="images/logo.png" alt="ProfCR Logo" class="h-14 w-auto mx-auto mb-6">
            </a>
    
            <div class="flex justify-center space-x-6 mb-8">
                <a href="https://www.facebook.com/amarkstudios/" target="_blank" class="text-gray-400 hover:text-blue-600 transition-colors">
                    <span class="sr-only">Facebook</span>
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z" clip-rule="evenodd" /></svg>
                </a>
                <a href="https://x.com/amarkstudio" target="_blank" class="text-gray-400 hover:text-gray-900 transition-colors">
                    <span class="sr-only">X</span>
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
                </a>
                <a href="https://www.instagram.com/amarkstudio/" target="_blank" class="text-gray-400 hover:text-pink-600 transition-colors">
                    <span class="sr-only">Instagram</span>
                     <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M12 2c2.828 0 3.23.012 4.352.063c1.096.05 1.83.218 2.47.464c.652.25 1.21.583 1.745 1.12c.537.536.87 1.092 1.12 1.744c.246.64.414 1.375.464 2.47c.05 1.123.063 1.524.063 4.352s-.012 3.23-.063 4.352c-.05 1.096-.218 1.83-.464 2.47c-.25.652-.583 1.21-1.12 1.745c-.536.537-1.092.87-1.744 1.12c-.64.246-1.375.414-2.47.464C8.77 2.013 9.172 2 12 2zm0 1.8c-2.775 0-3.15.01-4.25.06c-1.012.046-1.63.208-2.09.4c-.48.198-.86.46-1.25.85c-.39.39-.652.77-.85 1.25c-.192.46-.354 1.078-.4 2.09c-.05 1.1-.06 1.475-.06 4.25s.01 3.15.06 4.25c.046 1.012.208 1.63.4 2.09c.198.48.46.86.85 1.25c.39.39.77.652 1.25.85c.46.192 1.078.354 2.09.4c1.1.05 1.475.06 4.25.06s3.15-.01 4.25-.06c1.012-.046 1.63-.208-2.09-.4c.48-.198.86-.46 1.25-.85c.39-.39.652-.77.85-1.25c.192-.46.354-1.078.4-2.09c.05-1.1.06-1.475.06-4.25s-.01-3.15-.06-4.25c-.046-1.012-.208-1.63-.4-2.09c-.198-.48-.46-.86-.85-1.25c-.39-.39-.77-.652-1.25-.85c-.46-.192-1.078-.354-2.09-.4C15.15 3.81 14.775 3.8 12 3.8zm0 4.5a3.7 3.7 0 100 7.4a3.7 3.7 0 000-7.4zm0 6c-1.215 0-2.2-1.03-2.2-2.3s.985-2.3 2.2-2.3s2.2 1.03 2.2 2.3s-.985 2.3-2.2-2.3zm4.336-6.42a.9.9 0 100-1.8a.9.9 0 000 1.8z" clip-rule="evenodd" /></svg>
                </a>
                <a href="https://www.tiktok.com/@amarkstudio" target="_blank" class="text-gray-400 hover:text-gray-900 transition-colors">
                    <span class="sr-only">TikTok</span>
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path d="M16.6 5.82s.51.5 0 0A4.278 4.278 0 0 1 15.54 3h-1.7v6.33A6.81 6.81 0 0 1 9.12 16a6.27 6.27 0 0 1-6.16-7.11 6.1 6.1 0 0 1 6.08-5.16v2.1a3.9 3.9 0 0 0-3.8 4.54 4.02 4.02 0 0 0 4.1 3.51 4.08 4.08 0 0 0 4.05-4.13V3h1.7a2.58 2.58 0 0 0 2.5 2.82z"/></svg>
                </a>
            </div>
    
            <p class="text-sm max-w-md mx-auto mb-8">Impulsando a los profesionales de Costa Rica con tecnología y diseño de clase mundial.</p>
            <p class="text-xs text-gray-500">&copy; 2025 <a href="https://wstudiocr.com" class="text-red-600 hover:underline">W Studio</a>. Creado por Apolo y <a href="https://gemini.google.com/" class="text-red-600 hover:underline">Gemini</a>.</p>
        </div>
    </footer>

    <!-- Chatbot Widget -->
    <div class="fixed bottom-6 right-6 z-[60]">
        <!-- Botón del Chat -->
        <button id="chat-toggle-btn" class="bg-blue-600 text-white w-16 h-16 rounded-full shadow-lg flex items-center justify-center transform hover:scale-110 transition-transform">
            <svg id="chat-icon-open" class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path></svg>
            <svg id="chat-icon-close" class="w-8 h-8 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
        </button>

        <!-- Ventana del Chat -->
        <div id="chat-window" class="chat-widget absolute bottom-20 right-0 w-80 md:w-96 bg-white rounded-2xl shadow-2xl border border-gray-200 hidden opacity-0 transform translate-y-4">
            <!-- Header del Chat -->
            <div class="bg-gray-50 p-4 rounded-t-2xl flex items-center space-x-3 border-b">
                <div class="bg-blue-600 p-2 rounded-full text-white">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"></path></svg>
                </div>
                <div>
                    <p class="font-bold text-gray-800">Asistente Gemini</p>
                    <p class="text-xs text-green-500 font-semibold">En línea</p>
                </div>
            </div>

            <!-- Cuerpo de Mensajes -->
            <div id="chat-messages" class="p-4 h-80 overflow-y-auto space-y-4">
			    <div class="flex justify-start">
			        <div class="chat-bubble bg-gray-200 text-gray-800 p-3 rounded-lg rounded-bl-none">
			            <p>¡Hola! Soy Gemini, tu asistente de ProfCR. ¿Listo para empezar? Cuando te suscribas a un plan, puedes enviar todo el contenido de tu nuevo sitio a nuestro correo: <strong>planes@profcr.com</strong>. ¿Tienes alguna pregunta sobre los planes?</p>
			        </div>
			    </div>
			</div>

            <!-- Input de Mensaje -->
            <div class="p-4 border-t">
                <form id="chat-form" class="relative">
                    <input id="chat-input" type="text" placeholder="Escribe tu pregunta..." class="w-full pl-4 pr-12 py-2 bg-gray-100 border rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500" autocomplete="off">
                    <button id="chat-send-btn" type="submit" class="absolute right-2 top-1/2 -translate-y-1/2 bg-blue-600 text-white w-8 h-8 rounded-full flex items-center justify-center hover:bg-blue-700 transition-colors disabled:bg-blue-400">
                        <svg class="w-5 h-5 transform rotate-90" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path></svg>
                    </button>
                </form>
                 <p class="text-xs text-gray-400 text-center mt-2">Asistente virtual potenciado por IA.</p>
            </div>
        </div>
    </div>


	<script src="https://www.paypal.com/sdk/js?client-id=ATfEZ6sEU_bXBhLbh2zLKKUNw8QYW7hgOOaKBy1-GgL5Z9nyraEPh8-kH2O8H1TEkZzA8w2Eu4sqIi_n&components=buttons&vault=true&intent=subscription"></script>
	
    <script>
    document.addEventListener('DOMContentLoaded', () => {

        // --- BASE DE DATOS LOCAL DE EJEMPLO ---
        const database = [
            { name: 'Arq. Sofía Castro', category: 'Plan Esencial', location: 'Ejemplo', description: 'Diseño de CV Digital en ProfCR, si desea obtenerlo siga las instrucciones de este sitio web.', imageUrl: 'images/modelo1.jpg', subdomain: 'esencial', tags: ['arquitecta', 'diseño', 'planos', 'construccion', 'cartago', 'sofia', 'castro'] },
            { name: 'Barbería Luka', category: 'Plan Crecimiento', location: 'San Pedro', description: 'Diseño de Portafolios en ProfCR, ahora utilice el buscador de perfiles, escriba sólo una "s" y vea todos.', imageUrl: 'images/modelo2.jpg', subdomain: 'crecimiento', tags: ['barberia', 'san pedro', 'cortes', 'pelo', 'barba', 'luka'] },
            { name: 'Abogados García & Asoc.', category: 'Plan Impacto', location: 'San José', description: 'Diseño de Blog en ProfCR, si después de ver todo le interesa un sitio web, eliga un plan y suscribase.', imageUrl: 'images/modelo3.jpg', subdomain: 'impacto', tags: ['abogados', 'legal', 'san jose', 'familia', 'comercial', 'garcia'] },
            { name: 'Maskotitas', category: 'Veterinaria', location: 'Rohrmoser', description: 'Especialistas en cirugías de mascotas, y tienda de productos y medicinas de veterinaria.', imageUrl: 'images/modelo4.jpg', subdomain: 'modelo4', tags: ['veterinario', 'mascotas', 'san jose', 'familia', 'cirugia', 'maskotitas'] },
            { name: 'Barbería Europa', category: 'Cuidado Personal', location: 'Rohrmoser', description: 'Especialistas en cortes de pelo europeos y clásicos estilos.', imageUrl: 'images/modelo5.jpg', subdomain: 'modelo5', tags: ['barberia', 'san jose', 'cortes', 'pelo', 'barba', 'europa'] },
            { name: 'Arq. Ronny Woods', category: 'Arquitectura y Diseño', location: 'Rohrmoser', description: 'Diseño de planos arquitectónicos para proyectos residenciales y comerciales. Creatividad y funcionalidad.', imageUrl: 'images/modelo6.jpg', subdomain: 'modelo6', tags: ['arquitecta', 'diseño', 'planos', 'construccion', 'san jose', 'ronny', 'woods'] },
            { name: 'Ing. Osvaldo Pérez', category: 'Ingeniero Civil', location: 'Rohrmoser', description: 'Especialistas en construcciones y firmas de planos de ingeniería.', imageUrl: 'images/modelo7.jpg', subdomain: 'modelo7', tags: ['ingeniero', 'diseño', 'planos', 'construccion', 'san jose', 'osvaldo', 'perez'] },
            { name: 'Ing. Kamil Gutierrez', category: 'Ingeniero Civil', location: 'Pavas', description: 'Especialistas en construcciones y firmas de planos de ingeniería.', imageUrl: 'images/modelo8.jpg', subdomain: 'modelo8', tags: ['ingeniero', 'diseño', 'planos', 'construccion', 'san jose', 'kamil', 'gutierrez'] },
            { name: 'Petshop K', category: 'Veterinaria', location: 'Rohrmoser', description: 'Especialistas en cirugías de mascotas, y tienda de productos y medicinas de veterinaria.', imageUrl: 'images/modelo9.jpg', subdomain: 'modelo9', tags: ['veterinario', 'mascotas', 'san jose', 'familia', 'cirugia', 'petshop'] },
        ];

        // --- LÓGICA DEL BUSCADOR ---
        const searchInput = document.getElementById('search-input');
        const resultsContainer = document.getElementById('results-container');
        const resultsTitle = document.getElementById('results-title');

        const renderResults = (data) => {
            resultsContainer.innerHTML = '';
            if (data.length === 0) {
                resultsContainer.innerHTML = `<p class="col-span-full text-center text-gray-500">No se encontraron resultados para tu búsqueda.</p>`;
                return;
            }
            data.forEach((item, index) => {
                const profileUrl = `https://${item.subdomain}.profcr.com`;
                const card = `
                <a href="${profileUrl}" target="_blank" class="block bg-white rounded-2xl overflow-hidden card-hover border border-gray-200/50 animate-fade-in-up" style="animation-delay: ${index * 100}ms;">
                    <div class="w-full h-56 bg-gray-200">
                        <img src="${item.imageUrl}" alt="${item.name}" class="w-full h-full object-cover" onerror="this.onerror=null;this.src='https://placehold.co/600x400/eeeeee/999999?text=Imagen+no+disponible';">
                    </div>
                    <div class="p-6">
                        <p class="text-sm font-medium text-blue-600 mb-1">${item.category} • ${item.location}</p>
                        <h3 class="text-xl font-semibold text-gray-900 mb-2">${item.name}</h3>
                        <p class="text-gray-600 text-sm">${item.description}</p>
                    </div>
                </a>`;
                resultsContainer.innerHTML += card;
            });
        };
        
        const performSearch = () => {
            const query = searchInput.value.toLowerCase().trim();
            if (!query) {
                resultsTitle.textContent = 'Últimos profesionales agregados';
                renderResults(database.slice(0, 3));
                return;
            }
            resultsTitle.textContent = 'Resultados de la búsqueda';
            const filteredData = database.filter(item => {
                const searchableString = `${item.name} ${item.category} ${item.location} ${item.tags.join(' ')}`.toLowerCase();
                return searchableString.includes(query);
            });
            renderResults(filteredData.slice(0, 9));
        };

        searchInput.addEventListener('keyup', performSearch);
        renderResults(database.slice(0, 3));


        // --- LÓGICA DE MENÚ MÓVIL Y DESKTOP ---
        const menuBtn = document.getElementById('menu-btn');
        const closeBtn = document.getElementById('close-btn');
        const mobileMenu = document.getElementById('mobile-menu');
        const backdrop = document.getElementById('menu-backdrop');
        const menuLinks = document.querySelectorAll('.menu-link');
        const planesToggleBtn = document.getElementById('planes-toggle-btn');
        const planesSubmenu = document.getElementById('planes-submenu');
        const planesChevron = document.getElementById('planes-chevron');
        
        const desktopPlansBtn = document.getElementById('desktop-plans-btn');
        const desktopPlansSubmenu = document.getElementById('desktop-plans-submenu');

        planesToggleBtn.addEventListener('click', () => {
            const isOpen = planesSubmenu.style.maxHeight;
            if (isOpen && isOpen !== '0px') {
                planesSubmenu.style.maxHeight = '0px';
                planesChevron.style.transform = 'rotate(0deg)';
            } else {
                planesSubmenu.style.maxHeight = planesSubmenu.scrollHeight + 'px';
                planesChevron.style.transform = 'rotate(180deg)';
            }
        });

        function openMenu() {
            backdrop.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
            setTimeout(() => {
                backdrop.style.opacity = '1';
                mobileMenu.classList.add('is-open');
            }, 10);
        }

        function closeMenu() {
            backdrop.style.opacity = '0';
            mobileMenu.classList.remove('is-open');
            setTimeout(() => {
                backdrop.classList.add('hidden');
                document.body.style.overflow = '';
            }, 300);
        }

        menuBtn.addEventListener('click', openMenu);
        closeBtn.addEventListener('click', closeMenu);
        backdrop.addEventListener('click', closeMenu);
        menuLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                if (e.target.closest('#planes-toggle-btn')) return;
                closeMenu();
            });
        });

        desktopPlansBtn.addEventListener('click', () => {
            const isHidden = desktopPlansSubmenu.classList.contains('hidden');
            if (isHidden) {
                desktopPlansSubmenu.classList.remove('hidden');
                setTimeout(() => {
                    desktopPlansSubmenu.classList.remove('opacity-0', '-translate-y-2');
                }, 10);
            } else {
                desktopPlansSubmenu.classList.add('opacity-0', '-translate-y-2');
                setTimeout(() => {
                    desktopPlansSubmenu.classList.add('hidden');
                }, 300);
            }
        });

        document.addEventListener('click', (e) => {
            if (!document.getElementById('desktop-plans-menu-container').contains(e.target)) {
                 desktopPlansSubmenu.classList.add('opacity-0', '-translate-y-2');
                setTimeout(() => {
                    desktopPlansSubmenu.classList.add('hidden');
                }, 300);
            }
        });


	    // --- LÓGICA DE BOTONES PAYPAL (VERSIÓN FINAL Y CORREGIDA) ---
	
	    const handleSubscription = (data, planName, planId) => {
	        console.log(`Iniciando verificación para el plan ${planName} con ID de suscripción: ${data.subscriptionID}`);
	        
	        const VERIFY_URL = 'https://profcr-geminichat-backend-b9ca0429e705.herokuapp.com/api/verify-subscription';
	
	        fetch(VERIFY_URL, {
	            method: 'POST',
	            headers: { 'Content-Type': 'application/json' },
	            body: JSON.stringify({
	                subscriptionID: data.subscriptionID,
	                planId: planId,       // <-- ESTA LÍNEA ARREGLA LA CONEXIÓN
	                planName: planName    // <-- Y ESTA TAMBIÉN
	            })
	        })
	        .then(response => {
	            // Primero, verificamos si la respuesta del servidor fue exitosa (código 200)
	            if (!response.ok) {
	                // Si no, lanzamos un error para que lo capture el .catch()
	                throw new Error(`El servidor respondió con un error: ${response.status}`);
	            }
	            return response.json();
	        })
	        .then(result => {
	            if (result.status === 'verificado') {
	                alert(`¡Gracias por tu suscripción al plan ${planName}! Tu sitio web está siendo creado y recibirás un correo en breve.`);
	            } else {
	                // Esto podría pasar si la suscripción no está activa por alguna razón
	                alert('La verificación de tu pago no fue exitosa. Por favor, contacta a soporte.');
	            }
	        })
	        .catch(error => {
	            console.error('Error durante el proceso de verificación:', error);
	            alert('Ocurrió un error al conectar con nuestros servicios. Por favor, contacta a soporte para confirmar tu suscripción.');
	        });
	    };
	
	    // Botones de PayPal (cada uno llama a la función de arriba con los datos correctos)
	    paypal.Buttons({
	        style: { shape: 'pill', color: 'blue', layout: 'vertical', label: 'subscribe' },
	        createSubscription: (data, actions) => actions.subscription.create({ plan_id: 'P-8KD45673HW2618100NCYUADY' }),
	        onApprove: (data, actions) => handleSubscription(data, 'Esencial', 'P-8KD45673HW2618100NCYUADY')
	    }).render('#paypal-button-container-P-8KD45673HW2618100NCYUADY');
	
	    paypal.Buttons({
	        style: { shape: 'pill', color: 'gold', layout: 'vertical', label: 'subscribe' },
	        createSubscription: (data, actions) => actions.subscription.create({ plan_id: 'P-1T955501L66107610NCYUMBI' }),
	        onApprove: (data, actions) => handleSubscription(data, 'Crecimiento', 'P-1T955501L66107610NCYUMBI')
	    }).render('#paypal-button-container-P-1T955501L66107610NCYUMBI');
	
	    paypal.Buttons({
	        style: { shape: 'pill', color: 'black', layout: 'vertical', label: 'subscribe' },
	        createSubscription: (data, actions) => actions.subscription.create({ plan_id: 'P-9DB8761963542112PNCYUFHY' }),
	        onApprove: (data, actions) => handleSubscription(data, 'Impacto', 'P-9DB8761963542112PNCYUFHY')
	    }).render('#paypal-button-container-P-9DB8761963542112PNCYUFHY');


        // --- LÓGICA DEL POPUP ---
        const popupContainer = document.getElementById('popup-container');
        const popupBackdrop = document.getElementById('popup-backdrop');
        const popupBox = document.getElementById('popup-box');
        const popupCloseBtn = document.getElementById('popup-close-btn');
        const popupActionBtn = document.getElementById('popup-action-btn');

        const showPopup = () => {
            const popupShown = sessionStorage.getItem('profcrPopupShown');
            if (popupShown) return;

            popupContainer.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
            setTimeout(() => {
                popupBackdrop.classList.remove('opacity-0');
                popupBox.classList.remove('opacity-0', 'scale-95');
            }, 10);
            sessionStorage.setItem('profcrPopupShown', 'true');
        };

        const hidePopup = () => {
            popupBackdrop.classList.add('opacity-0');
            popupBox.classList.add('opacity-0', 'scale-95');
            setTimeout(() => {
                popupContainer.classList.add('hidden');
                document.body.style.overflow = '';
            }, 300);
        };
        
        popupCloseBtn.addEventListener('click', () => hidePopup());
        popupActionBtn.addEventListener('click', () => hidePopup());
        popupBackdrop.addEventListener('click', () => hidePopup());

        setTimeout(showPopup, 7000);

        // --- LÓGICA DEL CHATBOT CON CONEXIÓN A GEMINI ---
        
        // CORRECCIÓN: Nunca se debe exponer una API Key en el código del cliente.
        // Guárdala en un entorno seguro en el servidor y crea un endpoint que tu frontend pueda llamar.
        const GEMINI_API_KEY = ""; // DEJA ESTO VACÍO. La plataforma lo gestionará.

        const chatToggleBtn = document.getElementById('chat-toggle-btn');
        const chatWindow = document.getElementById('chat-window');
        const chatIconOpen = document.getElementById('chat-icon-open');
        const chatIconClose = document.getElementById('chat-icon-close');
        const chatMessages = document.getElementById('chat-messages');
        const chatForm = document.getElementById('chat-form');
        const chatInput = document.getElementById('chat-input');
        const chatSendBtn = document.getElementById('chat-send-btn');
        
        let conversationHistory = [];

        chatToggleBtn.addEventListener('click', () => {
            const isHidden = chatWindow.classList.contains('hidden');
            if (isHidden) {
                chatWindow.classList.remove('hidden');
                setTimeout(() => {
                    chatWindow.classList.remove('opacity-0', 'translate-y-4');
                }, 10);
                chatIconOpen.classList.add('hidden');
                chatIconClose.classList.remove('hidden');
            } else {
                chatWindow.classList.add('opacity-0', 'translate-y-4');
                setTimeout(() => {
                    chatWindow.classList.add('hidden');
                }, 300);
                chatIconOpen.classList.remove('hidden');
                chatIconClose.classList.add('hidden');
            }
        });

        const addMessage = (text, sender) => {
            const messageDiv = document.createElement('div');
            messageDiv.classList.add('flex', sender === 'user' ? 'justify-end' : 'justify-start');
            
            const bubble = document.createElement('div');
            bubble.classList.add('chat-bubble', 'p-3', 'rounded-lg');
            bubble.classList.add(sender === 'user' ? 'bg-blue-600' : 'bg-gray-200', sender === 'user' ? 'text-white' : 'text-gray-800');
            bubble.classList.add(sender === 'user' ? 'rounded-br-none' : 'rounded-bl-none');
            bubble.textContent = text;
            
            messageDiv.appendChild(bubble);
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        };
        
        const addTypingIndicator = () => {
            const typingDiv = document.createElement('div');
            typingDiv.id = 'typing-indicator';
            typingDiv.classList.add('flex', 'justify-start');
            typingDiv.innerHTML = `
                <div class="chat-bubble bg-gray-200 p-3 rounded-lg rounded-bl-none">
                    <div class="typing-indicator">
                        <span></span><span></span><span></span>
                    </div>
                </div>`;
            chatMessages.appendChild(typingDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        };
        
        const removeTypingIndicator = () => {
            const indicator = document.getElementById('typing-indicator');
            if (indicator) indicator.remove();
        };

        const getGeminiResponse = async (userInput) => {
            // La URL de tu nuevo backend. Cuando lo despliegues, esta URL cambiará.
            const API_URL = 'https://profcr-geminichat-backend-b9ca0429e705.herokuapp.com/api/chat';

            // Preparamos el historial para enviarlo al backend
            const historyForApi = conversationHistory.map(item => ({
                role: item.role,
                parts: item.parts.map(p => ({ text: p.text }))
            }));

            try {
                const response = await fetch(API_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        // Enviamos el historial y el nuevo mensaje por separado
                        history: historyForApi,
                        message: userInput
                    })
                });

                if (!response.ok) {
                    throw new Error(`Error en el servidor: ${response.statusText}`);
                }

                const data = await response.json();
                const aiResponse = data.response;

                // Actualizamos el historial localmente
                conversationHistory.push({ role: "user", parts: [{ text: userInput }] });
                conversationHistory.push({ role: "model", parts: [{ text: aiResponse }] });
                
                return aiResponse;

            } catch (error) {
                console.error("Error al contactar el backend:", error);
                return "Lo siento, estoy teniendo problemas para conectarme en este momento. Por favor, intenta de nuevo más tarde.";
            }
        };

        // Modifica también la función handleChatSubmit para que no actualice el historial,
        // ya que getGeminiResponse ahora se encarga de eso.
        const handleChatSubmit = async (e) => {
            e.preventDefault();
            const userMessage = chatInput.value.trim();
            if (userMessage === '') return;

            addMessage(userMessage, 'user');
            chatInput.value = '';
            chatSendBtn.disabled = true;

            addTypingIndicator();

            // Llamamos a la función actualizada
            const aiResponse = await getGeminiResponse(userMessage);

            removeTypingIndicator();
            addMessage(aiResponse, 'ai');
            chatSendBtn.disabled = false;
        };

        chatForm.addEventListener('submit', handleChatSubmit);
        chatInput.addEventListener('input', () => {
            chatSendBtn.disabled = chatInput.value.trim() === '';
        });

		// CORRECCIÓN: Los 'await' de nivel superior solo funcionan en módulos de ES.
        // Se envolvieron en una función asíncrona autoejecutable para corregir el error de sintaxis.
        (async () => {
            try {
                // --- Ejemplo de Fetch a un endpoint de Github ---
                // Esto requeriría un backend para funcionar, es solo un ejemplo.
                // const response = await fetch('/github', {
                //   method: 'POST',
                //   headers: { 'Content-Type': 'application/json' },
                //   body: JSON.stringify({ endpoint: 'repos/ApoloSolInvictus/profcr', method: 'GET' })
                // });
                // const data = await response.json();
                console.log("Ejemplo de fetch a /github (simulado): listo.");

                // --- Ejemplo de Fetch para crear un sitio ---
                // Esto también requeriría un backend.
                // await fetch('/crear-sitio', {
                //   method: 'POST',
                //   headers: { 'Content-Type': 'application/json' },
                //   body: JSON.stringify({
                //     nombreCliente: "Juan Pérez",
                //     nombreSitio: "Portafolio Juan",
                //     descripcion: "Diseñador web en Costa Rica.",
                //     color: "#123456",
                //     emailCliente: "juan@correo.com"
                //   })
                // });
                console.log("Ejemplo de fetch a /crear-sitio (simulado): listo.");
            } catch (error) {
                console.error("Error en las funciones asíncronas de ejemplo:", error);
            }
		})();
    });
    </script>
</body>
</html>
